{"code":"!function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t);class s{constructor(e,t,r){this.setPosition(e,t),this.setSize(r)}setSize(e){this.size=e<0?0:e}setPosition(e,t){this.x=e,this.y=t}setStrokeColor(e){this.strokeColor=e}setFillColor(e){this.fillColor=e}setStrokeWidth(e){this.strokeWidth=e}canRender(){return Number.isFinite(this.size)&&Number.isFinite(this.x)&&Number.isFinite(this.y)}render(e){throw Error(\"This method cannot be called\")}}class i{constructor(){}setFromPos(e,t){this.fromX=e,this.fromY=t}setToPos(e,t){this.toX=e,this.toY=t}setStrokeColor(e){this.strokeColor=e}setStrokeWidth(e){this.strokeWidth=e}render(e){throw Error(\"Error\")}}class n{constructor(e,t){this.setPos(e,t)}setPos(e,t){this.x=e,this.y=t}setFillColor(e){this.fillStyle=e}setStrokeColor(e){this.strokeColor=e}render(e){throw Error(\"Error\")}}const o={circle:class extends s{render(e){e.beginPath(),e.arc(0,0,this.size/2,0,2*Math.PI,!1),e.fillStyle=this.fillColor,e.fill(),e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor,e.stroke()}},square:class extends s{render(e){e.beginPath(),e.rect(-this.size/2,-this.size/2,this.size,this.size),e.fillStyle=this.fillColor,e.fill(),e.lineWidth=this.strokeWidth,e.strokeWidth=this.strokeColor,e.stroke()}}},l={bold:class extends n{render(e){e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.font=\"bold 30pt Arial\",e.fillText(\"Bold\",this.x,this.y)}},thick:class extends n{render(e){e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.font=\"italic 30pt Arial\",e.fillText(\"Thick\",this.x,this.y)}}},h={vector:class extends i{render(e){e.beginPath(),e.moveTo(this.fromX,this.fromY),e.lineTo(this.toX,this.toY),e.stroke()}}};const c={currentFillColor:\"#fff\",currentStrokeColor:\"#000\",currentStrokeWidth:1,currentSize:100,currentDistance:100};const u=document.querySelector(\"#main-canvas\"),a=document.querySelector(\".arrow-list\"),d=new class{constructor(e){this.canvas=e,this.ctx=e.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(e,t){this.positions.push({x:e,y:t})}addFromPos(e,t){this.lineFromPos.push({fromX:e,fromY:t})}addToPos(e,t){this.lineToPos.push({toX:e,toY:t})}checkPositions(e,t,r){if(this.positions.length>0)for(let s of this.positions)if(!((2*r)**2<=(e-s.x)**2+(t-s.y)**2))return!1;return!0}addShape(e){e&&!this.shapes.includes(e)&&this.shapes.push(e)}addLine(e){e&&!this.lines.includes(e)&&this.lines.push(e)}addArrow(e){e&&!this.arrows.includes(e)&&this.arrows.push(e)}setCurrentShape(e){this.currentShape=e}setCurrentLine(e){this.currentLine=e}setCurrentArrow(e){this.currentArrow=e}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(e){e.canRender()&&(this.ctx.save(),this.ctx.translate(e.x,e.y),e.render(this.ctx),this.ctx.restore())}_renderLine(e){e.render(this.ctx)}_renderArrow(e){e.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(e=>{this._renderShape(e)}),this.lines.forEach(e=>{this._renderLine(e)}),this.arrows.forEach(e=>{this._renderArrow(e)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this._render()})}}(u);function f(e,t,r){const s=new e(t,r,c.currentSize);return s.setFillColor(c.currentFillColor),s.setStrokeColor(c.currentStrokeColor),s.setStrokeWidth(c.currentStrokeWidth),s}function S(e){const t=new e;return t.setStrokeColor(c.currentStrokeColor),t.setStrokeWidth(c.currentStrokeWidth),t}function p(){u.width=window.innerWidth,u.height=window.innerHeight}u.addEventListener(\"mousemove\",e=>{d.currentShape?d.currentShape.setPosition(e.clientX,e.clientY):d.currentLine&&(d.currentLine.setToPos(e.clientX,e.clientY),d.currentArrow&&d.currentArrow.setPos(e.clientX,e.clientY))}),u.addEventListener(\"click\",e=>{let t=e.clientX,r=e.clientY;if(d.currentShape&&d.checkPositions(t,r,c.currentDistance)){const e=d.currentShape.constructor;d.addShape(d.currentShape),d.addPosition(t,r),d.setCurrentShape(f(e,t,r))}if(d.currentLine&&!d.checkPositions(t,r,c.currentDistance/4))if(d.lineFromPos.length>d.lineToPos.length){d.addToPos(t,r),d.currentLine.setToPos(t,r),d.currentArrow&&d.currentArrow.setPos(t,r);let e=d.currentLine.constructor;d.lines.push(d.currentLine),d.setCurrentLine(S(e))}else d.addFromPos(t,r),d.currentLine.setFromPos(t,r)}),document.addEventListener(\"click\",e=>{const t=e.target.dataset.shape;t&&o.hasOwnProperty(t)&&(d.setCurrentLine(null),d.setCurrentShape(f(o[t])));const r=e.target.dataset.line;r&&h.hasOwnProperty(r)&&(d.setCurrentShape(null),d.setCurrentLine(S(h[r])))}),a.addEventListener(\"change\",e=>{const t=e.target.value;t&&d.currentLine&&l.hasOwnProperty(t)&&(d.setCurrentArrow(function(e,t,r){const s=new e(t,r);return s.setStrokeColor(c.currentStrokeColor),s.setFillColor(c.currentFillColor),s}(l[t])),console.log(d.currentArrow))}),document.addEventListener(\"keydown\",e=>{27===e.keyCode&&(d.setCurrentShape(null),d.setCurrentLine(null))}),window.addEventListener(\"load\",p),window.addEventListener(\"resize\",p)}]);","extractedComments":[]}