{"code":"!function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e);class s{constructor(t,e,r){this.setPosition(t,e),this.setSize(r)}setSize(t){this.size=t<0?0:t}setPosition(t,e){this.x=t,this.y=e}setStrokeColor(t){this.strokeColor=t}setFillColor(t){this.fillColor=t}setStrokeWidth(t){this.strokeWidth=t}canRender(){return Number.isFinite(this.size)&&Number.isFinite(this.x)&&Number.isFinite(this.y)}render(t){throw Error(\"This method cannot be called\")}}class i{constructor(){}setFromPos(t,e){this.fromX=t,this.fromY=e}setToPos(t,e){this.toX=t,this.toY=e}setStrokeColor(t){this.strokeColor=t}setStrokeWidth(t){this.strokeWidth=t}render(t){throw Error(\"Error\")}}class n{constructor(t,e){this.setPos(t,e)}setPos(t,e){this.x=t,this.y=e}setFillStyle(t){this.fillStyle=t}setStrokeColor(t){this.strokeColor=t}render(t){throw Error(\"Error\")}}const o={circle:class extends s{render(t){t.beginPath(),t.arc(0,0,this.size/2,0,2*Math.PI,!1),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeStyle=this.strokeColor,t.stroke()}},square:class extends s{render(t){t.beginPath(),t.rect(-this.size/2,-this.size/2,this.size,this.size),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeWidth=this.strokeColor,t.stroke()}}},l={bold:class extends n{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"bold 30pt Arial\",t.fillText(\"Bold\",this.x,this.y)}},thick:class extends n{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"italic 30pt Arial\",t.fillText(\"Thick\",this.x,this.y)}}},h={vector:class extends i{render(t){t.beginPath(),t.moveTo(this.fromX,this.fromY),t.lineTo(this.toX,this.toY),t.stroke()}}};const c={currentFillColor:\"#fff\",currentStrokeColor:\"#000\",currentStrokeWidth:1,currentSize:100,currentDistance:100};const u=document.querySelector(\"#main-canvas\"),a=document.querySelector(\".arrow-list\"),d=new class{constructor(t){this.canvas=t,this.ctx=t.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(t,e){this.positions.push({x:t,y:e})}addFromPos(t,e){this.lineFromPos.push({fromX:t,fromY:e})}addToPos(t,e){this.lineToPos.push({toX:t,toY:e})}checkPositions(t,e,r){if(this.positions.length>0)for(let s of this.positions)if(!((2*r)**2<=(t-s.x)**2+(e-s.y)**2))return!1;return!0}addShape(t){t&&!this.shapes.includes(t)&&this.shapes.push(t)}addLine(t){t&&!this.lines.includes(t)&&this.lines.push(t)}addArrow(t){t&&!this.arrows.includes(t)&&this.arrows.push(t)}setCurrentShape(t){this.currentShape=t}setCurrentLine(t){this.currentLine=t}setCurrentArrow(t){this.currentArrow=t}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(t){t.canRender()&&(this.ctx.save(),this.ctx.translate(t.x,t.y),t.render(this.ctx),this.ctx.restore())}_renderLine(t){t.render(this.ctx)}_renderArrow(t){t.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(t=>{this._renderShape(t)}),this.lines.forEach(t=>{this._renderLine(t)}),this.arrows.forEach(t=>{this._renderArrow(t)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this._render()})}}(u);function f(t,e,r){const s=new t(e,r,c.currentSize);return s.setFillColor(c.currentFillColor),s.setStrokeColor(c.currentStrokeColor),s.setStrokeWidth(c.currentStrokeWidth),s}function S(t){const e=new t;return e.setStrokeColor(c.currentStrokeColor),e.setStrokeWidth(c.currentStrokeWidth),e}function p(){u.width=window.innerWidth,u.height=window.innerHeight}u.addEventListener(\"mousemove\",t=>{d.currentShape?d.currentShape.setPosition(t.clientX,t.clientY):d.currentLine&&d.currentLine.setToPos(t.clientX,t.clientY)}),u.addEventListener(\"click\",t=>{let e=t.clientX,r=t.clientY;if(d.currentShape&&d.checkPositions(e,r,c.currentDistance)){const t=d.currentShape.constructor;d.addShape(d.currentShape),d.addPosition(e,r),d.setCurrentShape(f(t,e,r))}if(d.currentLine&&!d.checkPositions(e,r,c.currentDistance/4))if(d.lineFromPos.length>d.lineToPos.length){d.addToPos(e,r),d.currentLine.setToPos(e,r);let t=d.currentLine.constructor;d.lines.push(d.currentLine),d.setCurrentLine(S(t))}else d.addFromPos(e,r),d.currentLine.setFromPos(e,r)}),document.addEventListener(\"click\",t=>{const e=t.target.dataset.shape;e&&o.hasOwnProperty(e)&&(d.setCurrentLine(null),d.setCurrentShape(f(o[e])));const r=t.target.dataset.line;r&&h.hasOwnProperty(r)&&(d.setCurrentShape(null),d.setCurrentLine(S(h[r])))}),a.addEventListener(\"change\",t=>{const e=t.target.value;e&&d.currentLine&&l.hasOwnProperty(e)&&d.setCurrentArrow(function(t,e,r){const s=new t(e,r);return s.setStrokeColor(c.currentStrokeColor),s.setFillColor(c.currentFillColor),s}(l[e]))}),document.addEventListener(\"keydown\",t=>{27===t.keyCode&&(d.setCurrentShape(null),d.setCurrentLine(null))}),window.addEventListener(\"load\",p),window.addEventListener(\"resize\",p)}]);","extractedComments":[]}