{"code":"!function(t){var e={};function r(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e);class s{constructor(t,e,r){this.setPosition(t,e),this.setSize(r)}setSize(t){this.size=t<0?0:t}setPosition(t,e){this.x=t,this.y=e}setStrokeColor(t){this.strokeColor=t}setFillColor(t){this.fillColor=t}setStrokeWidth(t){this.strokeWidth=t}canRender(){return Number.isFinite(this.size)&&Number.isFinite(this.x)&&Number.isFinite(this.y)}render(t){throw Error(\"This method cannot be called\")}}class n{constructor(){}setFromPos(t,e){this.fromX=t,this.fromY=e}setToPos(t,e){this.toX=t,this.toY=e}setStrokeColor(t){this.strokeColor=t}setStrokeWidth(t){this.strokeWidth=t}render(t){throw Error(\"Error\")}}class o{constructor(t,e){this.setPos(t,e)}setPos(t,e){this.x=t,this.y=e}setFillColor(t){this.fillStyle=t}setStrokeColor(t){this.strokeColor=t}render(t){throw Error(\"Error\")}}class i extends o{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"bold 30pt Arial\",t.fillText(\"Bold\",this.x,this.y)}}class l extends o{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"italic 30pt Arial\",t.fillText(\"Thick\",this.x,this.y)}}const h={circle:class extends s{render(t){t.beginPath(),t.arc(0,0,this.size/2,0,2*Math.PI,!1),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeStyle=this.strokeColor,t.stroke()}},square:class extends s{render(t){t.beginPath(),t.rect(-this.size/2,-this.size/2,this.size,this.size),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeWidth=this.strokeColor,t.stroke()}}},c={from:{none:null,bold:i,thick:l},to:{none:null,bold:i,thick:l}},u={vector:class extends n{render(t){t.beginPath(),t.moveTo(this.fromX,this.fromY),t.lineTo(this.toX,this.toY),t.stroke()}}};const a={currentFillColor:\"#fff\",currentFontColor:\"#000\",currentStrokeColor:\"#000\",currentStrokeWidth:1,currentSize:100,currentDistance:100};const d=document.querySelector(\"#main-canvas\"),f=document.querySelector(\"#from\"),S=new class{constructor(t){this.canvas=t,this.ctx=t.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(t,e){this.positions.push({x:t,y:e})}addFromPos(t,e){this.lineFromPos.push({fromX:t,fromY:e})}addToPos(t,e){this.lineToPos.push({toX:t,toY:e})}checkPositions(t,e,r){if(this.positions.length>0)for(let s of this.positions)if(!((2*r)**2<=(t-s.x)**2+(e-s.y)**2))return!1;return!0}addShape(t){t&&!this.shapes.includes(t)&&this.shapes.push(t)}addLine(t){t&&!this.lines.includes(t)&&this.lines.push(t)}addArrow(t){t&&!this.arrows.includes(t)&&this.arrows.push(t)}setCurrentShape(t){this.currentShape=t}setCurrentLine(t){this.currentLine=t}setCurrentArrow(t){this.currentArrow=t}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(t){t.canRender()&&(this.ctx.save(),this.ctx.translate(t.x,t.y),t.render(this.ctx),this.ctx.restore())}_renderLine(t){t.render(this.ctx)}_renderArrow(t){t.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(t=>{this._renderShape(t)}),this.lines.forEach(t=>{this._renderLine(t)}),this.arrows.forEach(t=>{this._renderArrow(t)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this.currentArrow&&this._renderArrow(this.currentArrow),this._render()})}}(d);function p(t,e){if(S.currentArrow){S.currentArrow.setPos(t,e);const r=S.currentArrow.constructor;S.addArrow(S.currentArrow),S.setCurrentArrow(C(r,t,e))}}function k(t,e,r){const s=new t(e,r,a.currentSize);return s.setFillColor(a.currentFillColor),s.setStrokeColor(a.currentStrokeColor),s.setStrokeWidth(a.currentStrokeWidth),s}function w(t){const e=new t;return e.setStrokeColor(a.currentStrokeColor),e.setStrokeWidth(a.currentStrokeWidth),e}function C(t,e,r){if(t){const s=new t(e,r);return s.setStrokeColor(a.currentFontColor),s.setFillColor(a.currentFontColor),s}}function y(){d.width=window.innerWidth,d.height=window.innerHeight}d.addEventListener(\"mousemove\",t=>{S.currentShape?S.currentShape.setPosition(t.clientX,t.clientY):S.currentLine&&(S.currentLine.setToPos(t.clientX,t.clientY),S.currentArrow&&S.currentArrow.setPos(t.clientX,t.clientY))}),d.addEventListener(\"click\",t=>{let e=t.clientX,r=t.clientY;if(S.currentShape&&S.checkPositions(e,r,a.currentDistance)){const t=S.currentShape.constructor;S.addShape(S.currentShape),S.addPosition(e,r),S.setCurrentShape(k(t,e,r))}if(S.currentLine&&!S.checkPositions(e,r,a.currentDistance/4))if(S.lineFromPos.length>S.lineToPos.length){S.addToPos(e,r),S.currentLine.setToPos(e,r);let t=S.currentLine.constructor;S.lines.push(S.currentLine),p(e,r),S.setCurrentLine(w(t))}else S.addFromPos(e,r),S.currentLine.setFromPos(e,r),p(e,r)}),document.addEventListener(\"click\",t=>{const e=t.target.dataset.shape;e&&h.hasOwnProperty(e)&&(S.setCurrentLine(null),S.setCurrentShape(k(h[e])));const r=t.target.dataset.line;r&&u.hasOwnProperty(r)&&(S.setCurrentShape(null),S.setCurrentLine(w(u[r])))}),f.addEventListener(\"change\",t=>{const e=t.target.value;e&&S.currentLine&&c.hasOwnProperty(e)&&S.setCurrentArrow(C(c[e]))}),document.addEventListener(\"keydown\",t=>{27===t.keyCode&&(S.setCurrentShape(null),S.setCurrentLine(null))}),window.addEventListener(\"load\",y),window.addEventListener(\"resize\",y)}]);","extractedComments":[]}