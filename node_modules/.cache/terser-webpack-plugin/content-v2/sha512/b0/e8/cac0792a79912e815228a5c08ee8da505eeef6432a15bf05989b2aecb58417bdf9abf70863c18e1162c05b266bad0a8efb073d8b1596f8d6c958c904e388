{"code":"!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=1)}([function(e,r){throw new Error(\"Module parse failed: Unexpected token (31:1)\\nYou may need an appropriate loader to handle this file type.\\n| \\tcurrentFillColor: currentFillColor,\\r\\n| \\tcurrentFontColor: currentFontColor \\r\\n> \\tcurrentStrokeColor: currentStrokeColor,\\r\\n| \\tcurrentStrokeWidth: currentStrokeWidth,\\r\\n| \\tcurrentSize: currentSize,\\r\")},function(e,r,t){\"use strict\";t.r(r);var n=t(0);const o=document.querySelector(\"#main-canvas\"),s=document.querySelector(\".arrow-list\"),i=new class{constructor(e){this.canvas=e,this.ctx=e.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(e,r){this.positions.push({x:e,y:r})}addFromPos(e,r){this.lineFromPos.push({fromX:e,fromY:r})}addToPos(e,r){this.lineToPos.push({toX:e,toY:r})}checkPositions(e,r,t){if(this.positions.length>0)for(let n of this.positions)if(!((2*t)**2<=(e-n.x)**2+(r-n.y)**2))return!1;return!0}addShape(e){e&&!this.shapes.includes(e)&&this.shapes.push(e)}addLine(e){e&&!this.lines.includes(e)&&this.lines.push(e)}addArrow(e){e&&!this.arrows.includes(e)&&this.arrows.push(e)}setCurrentShape(e){this.currentShape=e}setCurrentLine(e){this.currentLine=e}setCurrentArrow(e){this.currentArrow=e}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(e){e.canRender()&&(this.ctx.save(),this.ctx.translate(e.x,e.y),e.render(this.ctx),this.ctx.restore())}_renderLine(e){e.render(this.ctx)}_renderArrow(e){e.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(e=>{this._renderShape(e)}),this.lines.forEach(e=>{this._renderLine(e)}),this.arrows.forEach(e=>{this._renderArrow(e)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this.currentArrow&&this._renderArrow(this.currentArrow),this._render()})}}(o);function c(e,r,t){const o=new e(r,t,n.styles.currentSize);return o.setFillColor(n.styles.currentFillColor),o.setStrokeColor(n.styles.currentStrokeColor),o.setStrokeWidth(n.styles.currentStrokeWidth),o}function u(e){const r=new e;return r.setStrokeColor(n.styles.currentStrokeColor),r.setStrokeWidth(n.styles.currentStrokeWidth),r}function a(e,r,t){const o=new e(r,t);return o.setStrokeColor(n.styles.currentStrokeColor),o.setFillColor(n.styles.currentFillColor),o}function l(){o.width=window.innerWidth,o.height=window.innerHeight}o.addEventListener(\"mousemove\",e=>{i.currentShape?i.currentShape.setPosition(e.clientX,e.clientY):i.currentLine&&(i.currentLine.setToPos(e.clientX,e.clientY),i.currentArrow&&i.currentArrow.setPos(e.clientX,e.clientY))}),o.addEventListener(\"click\",e=>{let r=e.clientX,t=e.clientY;if(i.currentShape&&i.checkPositions(r,t,n.styles.currentDistance)){const e=i.currentShape.constructor;i.addShape(i.currentShape),i.addPosition(r,t),i.setCurrentShape(c(e,r,t))}if(i.currentLine&&!i.checkPositions(r,t,n.styles.currentDistance/4))if(i.lineFromPos.length>i.lineToPos.length){if(i.addToPos(r,t),i.currentLine.setToPos(r,t),i.currentArrow){i.currentArrow.setPos(r,t);const e=i.currentArrow.constructor;i.addArrow(i.currentArrow),i.setCurrentArrow(a(e,r,t))}let e=i.currentLine.constructor;i.lines.push(i.currentLine),i.setCurrentLine(u(e))}else i.addFromPos(r,t),i.currentLine.setFromPos(r,t)}),document.addEventListener(\"click\",e=>{const r=e.target.dataset.shape;r&&n.shapeMap.hasOwnProperty(r)&&(i.setCurrentLine(null),i.setCurrentShape(c(n.shapeMap[r])));const t=e.target.dataset.line;t&&n.lineMap.hasOwnProperty(t)&&(i.setCurrentShape(null),i.setCurrentLine(u(n.lineMap[t])))}),s.addEventListener(\"change\",e=>{const r=e.target.value;r&&i.currentLine&&n.arrowMap.hasOwnProperty(r)&&(i.setCurrentArrow(a(n.arrowMap[r])),console.log(i.currentArrow))}),document.addEventListener(\"keydown\",e=>{27===e.keyCode&&(i.setCurrentShape(null),i.setCurrentLine(null))}),window.addEventListener(\"load\",l),window.addEventListener(\"resize\",l)}]);","extractedComments":[]}