{"code":"!function(t){var e={};function r(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)r.d(s,o,function(e){return t[e]}.bind(null,o));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";r.r(e);class s{constructor(t,e,r){this.setPosition(t,e),this.setSize(r)}setSize(t){this.size=t<0?0:t}setPosition(t,e){this.x=t,this.y=e}setStrokeColor(t){this.strokeColor=t}setFillColor(t){this.fillColor=t}setStrokeWidth(t){this.strokeWidth=t}canRender(){return Number.isFinite(this.size)&&Number.isFinite(this.x)&&Number.isFinite(this.y)}render(t){throw Error(\"This method cannot be called\")}}class o{constructor(){}setFromPos(t,e){this.fromX=t,this.fromY=e}setToPos(t,e){this.toX=t,this.toY=e}setStrokeColor(t){this.strokeColor=t}setStrokeWidth(t){this.strokeWidth=t}render(t){throw Error(\"Error\")}}class n{constructor(t,e){this.setPos(t,e)}setPos(t,e){this.x=t,this.y=e}setFillColor(t){this.fillStyle=t}setStrokeColor(t){this.strokeColor=t}render(t){throw Error(\"Error\")}}const i={circle:class extends s{render(t){t.beginPath(),t.arc(0,0,this.size/2,0,2*Math.PI,!1),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeStyle=this.strokeColor,t.stroke()}},square:class extends s{render(t){t.beginPath(),t.rect(-this.size/2,-this.size/2,this.size,this.size),t.fillStyle=this.fillColor,t.fill(),t.lineWidth=this.strokeWidth,t.strokeWidth=this.strokeColor,t.stroke()}}},l={none:null,bold:class extends n{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"bold 30pt Arial\",t.fillText(\"Bold\",this.x,this.y)}},thick:class extends n{render(t){t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.font=\"italic 30pt Arial\",t.fillText(\"Thick\",this.x,this.y)}}},c={vector:class extends o{render(t){t.beginPath(),t.moveTo(this.fromX,this.fromY),t.lineTo(this.toX,this.toY),t.stroke()}}};const h={currentFillColor:\"#fff\",currentFontColor:\"#000\",currentStrokeColor:\"#000\",currentStrokeWidth:1,currentSize:100,currentDistance:100};const u=document.querySelector(\"#main-canvas\"),a=(document.querySelector(\"#from\"),document.querySelector(\"#to\"),new class{constructor(t){this.canvas=t,this.ctx=t.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(t,e){this.positions.push({x:t,y:e})}addFromPos(t,e){this.lineFromPos.push({fromX:t,fromY:e})}addToPos(t,e){this.lineToPos.push({toX:t,toY:e})}checkPositions(t,e,r){if(this.positions.length>0)for(let s of this.positions)if(!((2*r)**2<=(t-s.x)**2+(e-s.y)**2))return!1;return!0}addShape(t){t&&!this.shapes.includes(t)&&this.shapes.push(t)}addLine(t){t&&!this.lines.includes(t)&&this.lines.push(t)}addArrow(t){t&&!this.arrows.includes(t)&&this.arrows.push(t)}setCurrentShape(t){this.currentShape=t}setCurrentLine(t){this.currentLine=t}setCurrentArrow(t){this.currentArrow=t}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(t){t.canRender()&&(this.ctx.save(),this.ctx.translate(t.x,t.y),t.render(this.ctx),this.ctx.restore())}_renderLine(t){t.render(this.ctx)}_renderArrow(t){t.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(t=>{this._renderShape(t)}),this.lines.forEach(t=>{this._renderLine(t)}),this.arrows.forEach(t=>{this._renderArrow(t)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this.currentArrow&&this._renderArrow(this.currentArrow),this._render()})}}(u));function d(t,e){if(a.currentArrow){a.currentArrow.setPos(t,e);const r=a.currentArrow.constructor;a.addArrow(a.currentArrow),a.setCurrentArrow(p(r,t,e))}}function f(t,e,r){const s=new t(e,r,h.currentSize);return s.setFillColor(h.currentFillColor),s.setStrokeColor(h.currentStrokeColor),s.setStrokeWidth(h.currentStrokeWidth),s}function S(t){const e=new t;return e.setStrokeColor(h.currentStrokeColor),e.setStrokeWidth(h.currentStrokeWidth),e}function p(t,e,r){if(t){const s=new t(e,r);return s.setStrokeColor(h.currentFontColor),s.setFillColor(h.currentFontColor),s}}function w(){u.width=window.innerWidth,u.height=window.innerHeight}u.addEventListener(\"mousemove\",t=>{a.currentShape?a.currentShape.setPosition(t.clientX,t.clientY):a.currentLine&&(a.currentLine.setToPos(t.clientX,t.clientY),a.currentArrow&&a.currentArrow.setPos(t.clientX,t.clientY))}),u.addEventListener(\"click\",t=>{let e=t.clientX,r=t.clientY;if(a.currentShape&&a.checkPositions(e,r,h.currentDistance)){const t=a.currentShape.constructor;a.addShape(a.currentShape),a.addPosition(e,r),a.setCurrentShape(f(t,e,r))}if(a.currentLine&&!a.checkPositions(e,r,h.currentDistance/4))if(a.lineFromPos.length>a.lineToPos.length){a.addToPos(e,r),a.currentLine.setToPos(e,r);let t=a.currentLine.constructor;a.lines.push(a.currentLine),d(e,r),a.setCurrentLine(S(t))}else a.addFromPos(e,r),a.currentLine.setFromPos(e,r),d(e,r)}),document.addEventListener(\"click\",t=>{const e=t.target.dataset.shape;e&&i.hasOwnProperty(e)&&(a.setCurrentLine(null),a.setCurrentShape(f(i[e])));const r=t.target.dataset.line;r&&c.hasOwnProperty(r)&&(a.setCurrentShape(null),a.setCurrentLine(S(c[r])))}),arrowList.addEventListener(\"change\",t=>{console.log(t.target);const e=t.target.value;e&&a.currentLine&&l.hasOwnProperty(e)&&a.setCurrentArrow(p(l[e]))}),document.addEventListener(\"keydown\",t=>{27===t.keyCode&&(a.setCurrentShape(null),a.setCurrentLine(null))}),window.addEventListener(\"load\",w),window.addEventListener(\"resize\",w)}]);","extractedComments":[]}