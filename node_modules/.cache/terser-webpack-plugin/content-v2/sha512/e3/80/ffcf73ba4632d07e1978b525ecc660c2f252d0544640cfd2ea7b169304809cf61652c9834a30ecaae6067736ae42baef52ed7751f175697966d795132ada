{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=1)}([function(e,t){throw new Error(\"Module parse failed: Unexpected token (14:1)\\nYou may need an appropriate loader to handle this file type.\\n| export const arrowMap = {\\r\\n| \\tnone: null\\r\\n> \\tbold: Bold,\\r\\n| \\tthick: Thick,\\r\\n| };\\r\")},function(e,t,r){\"use strict\";r.r(t);var n=r(0);const s=document.querySelector(\"#main-canvas\"),o=document.querySelector(\".arrow-list\"),i=new class{constructor(e){this.canvas=e,this.ctx=e.getContext(\"2d\"),this.shapes=[],this.lines=[],this.arrows=[],this.positions=[],this.lineToPos=[],this.lineFromPos=[],this._render()}addPosition(e,t){this.positions.push({x:e,y:t})}addFromPos(e,t){this.lineFromPos.push({fromX:e,fromY:t})}addToPos(e,t){this.lineToPos.push({toX:e,toY:t})}checkPositions(e,t,r){if(this.positions.length>0)for(let n of this.positions)if(!((2*r)**2<=(e-n.x)**2+(t-n.y)**2))return!1;return!0}addShape(e){e&&!this.shapes.includes(e)&&this.shapes.push(e)}addLine(e){e&&!this.lines.includes(e)&&this.lines.push(e)}addArrow(e){e&&!this.arrows.includes(e)&&this.arrows.push(e)}setCurrentShape(e){this.currentShape=e}setCurrentLine(e){this.currentLine=e}setCurrentArrow(e){this.currentArrow=e}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}_renderShape(e){e.canRender()&&(this.ctx.save(),this.ctx.translate(e.x,e.y),e.render(this.ctx),this.ctx.restore())}_renderLine(e){e.render(this.ctx)}_renderArrow(e){e.render(this.ctx)}_render(){requestAnimationFrame(()=>{this.clear(),this.shapes.forEach(e=>{this._renderShape(e)}),this.lines.forEach(e=>{this._renderLine(e)}),this.arrows.forEach(e=>{this._renderArrow(e)}),this.currentShape&&this._renderShape(this.currentShape),this.currentLine&&this._renderLine(this.currentLine),this.currentArrow&&this._renderArrow(this.currentArrow),this._render()})}}(s);function c(e,t,r){const s=new e(t,r,n.styles.currentSize);return s.setFillColor(n.styles.currentFillColor),s.setStrokeColor(n.styles.currentStrokeColor),s.setStrokeWidth(n.styles.currentStrokeWidth),s}function u(e){const t=new e;return t.setStrokeColor(n.styles.currentStrokeColor),t.setStrokeWidth(n.styles.currentStrokeWidth),t}function a(e,t,r){const s=new e(t,r);return s.setStrokeColor(n.styles.currentFontColor),s.setFillColor(n.styles.currentFontColor),s}function h(){s.width=window.innerWidth,s.height=window.innerHeight}s.addEventListener(\"mousemove\",e=>{i.currentShape?i.currentShape.setPosition(e.clientX,e.clientY):i.currentLine&&(i.currentLine.setToPos(e.clientX,e.clientY),i.currentArrow&&i.currentArrow.setPos(e.clientX,e.clientY))}),s.addEventListener(\"click\",e=>{let t=e.clientX,r=e.clientY;if(i.currentShape&&i.checkPositions(t,r,n.styles.currentDistance)){const e=i.currentShape.constructor;i.addShape(i.currentShape),i.addPosition(t,r),i.setCurrentShape(c(e,t,r))}if(i.currentLine&&!i.checkPositions(t,r,n.styles.currentDistance/4))if(i.lineFromPos.length>i.lineToPos.length){i.addToPos(t,r),i.currentLine.setToPos(t,r);let e=i.currentLine.constructor;i.lines.push(i.currentLine),i.setCurrentLine(u(e))}else if(i.addFromPos(t,r),i.currentLine.setFromPos(t,r),i.currentArrow){i.currentArrow.setPos(t,r);const e=i.currentArrow.constructor;i.addArrow(i.currentArrow),i.setCurrentArrow(a(e,t,r))}}),document.addEventListener(\"click\",e=>{const t=e.target.dataset.shape;t&&n.shapeMap.hasOwnProperty(t)&&(i.setCurrentLine(null),i.setCurrentShape(c(n.shapeMap[t])));const r=e.target.dataset.line;r&&n.lineMap.hasOwnProperty(r)&&(i.setCurrentShape(null),i.setCurrentLine(u(n.lineMap[r])))}),o.addEventListener(\"change\",e=>{const t=e.target.value;t&&i.currentLine&&n.arrowMap.hasOwnProperty(t)&&i.setCurrentArrow(a(n.arrowMap[t]))}),document.addEventListener(\"keydown\",e=>{27===e.keyCode&&(i.setCurrentShape(null),i.setCurrentLine(null))}),window.addEventListener(\"load\",h),window.addEventListener(\"resize\",h)}]);","extractedComments":[]}